<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
                    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="yj.kr.electronicpayment.mapper.ElectronicpaymentMapper">
	
	<select id="electronicpaymentlist" resultType="map" parameterType="map" >
		SELECT
			ELECTRONICPAYMENT_SEQ,
			ELECTRONICPAYMENT_TITLE,
			ELECTRONICPAYMENT_CONTENTS,
			ELECTRONICPAYMENT_USER_ID,
			ELECTRONICPAYMENT_CREATEDATE,
			IFNULL(ELECTRONICPAYMENT_PAYMENT_USER_ID,'') as ELECTRONICPAYMENT_PAYMENT_USER_ID,
			IFNULL(ELECTRONICPAYMENT_PAYMENTDATE,'') as ELECTRONICPAYMENT_PAYMENTDATE,
			IFNULL(ELECTRONICPAYMENT_STATE,'') as ELECTRONICPAYMENT_STATE,
			IFNULL(ELECTRONICPAYMENT_UPDATEDATE,'') as ELECTRONICPAYMENT_UPDATEDATE
		FROM
			ELECTRONICPAYMENT
		ORDER BY 
			ELECTRONICPAYMENT_SEQ DESC
	</select>


	<select id="electronicpaymentmaxseq" resultType="map" parameterType="map">
		SELECT 
			MAX(ELECTRONICPAYMENT_SEQ)+1 ELECTRONICPAYMENT_SEQ
		FROM 
			ELECTRONICPAYMENT
	</select>
	
	
	<insert id="electronicpaymentinsert">
		INSERT ELECTRONICPAYMENT (
			ELECTRONICPAYMENT_SEQ,
			ELECTRONICPAYMENT_TITLE,
			ELECTRONICPAYMENT_CONTENTS,
			ELECTRONICPAYMENT_USER_ID,
			ELECTRONICPAYMENT_CREATEDATE,
			ELECTRONICPAYMENT_STATE
		) VALUE (
			#{ELECTRONICPAYMENT_SEQ},
			#{ELECTRONICPAYMENT_TITLE},
			#{ELECTRONICPAYMENT_CONTENTS},
			#{ELECTRONICPAYMENT_USER_ID},
			#{ELECTRONICPAYMENT_CREATEDATE},
			#{ELECTRONICPAYMENT_STATE}
		)
	</insert>
	
	<select id="electronicpaymentdetail" resultType="map" parameterType="map">
		SELECT
			ELECTRONICPAYMENT_SEQ,
			ELECTRONICPAYMENT_TITLE,
			ELECTRONICPAYMENT_CONTENTS,
			ELECTRONICPAYMENT_USER_ID,
			ELECTRONICPAYMENT_CREATEDATE,
			IFNULL(ELECTRONICPAYMENT_PAYMENT_USER_ID,'') as ELECTRONICPAYMENT_PAYMENT_USER_ID,
			IFNULL(ELECTRONICPAYMENT_PAYMENTDATE,'') as ELECTRONICPAYMENT_PAYMENTDATE,
			IFNULL(ELECTRONICPAYMENT_STATE,'') as ELECTRONICPAYMENT_STATE 
		FROM
			ELECTRONICPAYMENT
		WHERE
			ELECTRONICPAYMENT_SEQ = #{ELECTRONICPAYMENT_SEQ}
	</select>
	
	
	<update id="payment">
		UPDATE ELECTRONICPAYMENT 
			SET ELECTRONICPAYMENT_STATE = #{ELECTRONICPAYMENT_STATE},
				ELECTRONICPAYMENT_PAYMENTDATE = #{ELECTRONICPAYMENT_PAYMENTDATE},
				ELECTRONICPAYMENT_PAYMENT_USER_ID = #{ELECTRONICPAYMENT_PAYMENT_USER_ID}
		WHERE ELECTRONICPAYMENT_SEQ = #{ELECTRONICPAYMENT_SEQ}
	</update>
	
	<update id="updatepayment">
		UPDATE ELECTRONICPAYMENT 
			SET ELECTRONICPAYMENT_CONTENTS = #{ELECTRONICPAYMENT_CONTENTS},
				ELECTRONICPAYMENT_TITLE = #{ELECTRONICPAYMENT_TITLE},
				ELECTRONICPAYMENT_UPDATEDATE = #{ELECTRONICPAYMENT_UPDATEDATE},
				ELECTRONICPAYMENT_STATE = #{ELECTRONICPAYMENT_STATE},
				ELECTRONICPAYMENT_PAYMENT_USER_ID = "",
				ELECTRONICPAYMENT_PAYMENTDATE =""
		WHERE ELECTRONICPAYMENT_SEQ = #{ELECTRONICPAYMENT_SEQ}	
	</update>
	
	<delete id="deletepayment">
		DELETE FROM ELECTRONICPAYMENT WHERE ELECTRONICPAYMENT_SEQ = #{ELECTRONICPAYMENT_SEQ}
	</delete>
	
	<update id="backpayment">
		UPDATE ELECTRONICPAYMENT 
			SET ELECTRONICPAYMENT_STATE = #{ELECTRONICPAYMENT_STATE},
				ELECTRONICPAYMENT_PAYMENTDATE = #{ELECTRONICPAYMENT_PAYMENTDATE},
				ELECTRONICPAYMENT_PAYMENT_USER_ID = #{ELECTRONICPAYMENT_PAYMENT_USER_ID}
		WHERE ELECTRONICPAYMENT_SEQ = #{ELECTRONICPAYMENT_SEQ}	
	</update>
	
</mapper>









